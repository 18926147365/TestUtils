<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>

		<script type="text/javascript" src="https://cdn2.liucool.com/oss/plugin/js/fm-jquery.js?fmV=1578486572168"></script>

	</head>
	<style>

	</style>

	<body>
		<input id="text" type="text" value="1" />
		<button id="btn">确认</button>
		<input id="count" type="text" value="3" />
	</body>
	<script>
		$(function(){
			$("#btn").click(function(){
				var target=$("#text").val();
				var source=$("#count").val();

				fadeIncr(source,target,function(i){
					$("#count").val(i);
				});
			})
			// $("#btn").click();
			
			function fadeIncr(source,target,funct){
				//TODO 参数验证

				var step=(target-source)/50;
				var isAdd=step>0?false:true;
				var total=parseFloat(source);
				var interval=setInterval(function(){
                    total=total+step
					if((isAdd? parseFloat(target)>=total:parseFloat(target)<=total)){
						funct(target);
						clearInterval(interval);
					}else {
						funct(total);
					}


				},20)
			

			}
		})


	</script>

</html>